(this.webpackJsonpmovieapp=this.webpackJsonpmovieapp||[]).push([[0],{35:function(e){e.exports=JSON.parse('{"apiUrl":"https://sometimes-maybe-flaky-api.gdshive.io/"}')},44:function(e,t,n){},46:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(9),i=n.n(s),o=(n(44),n(45),n(13)),l=(n(46),n(20)),u=n.n(l),j=n(37),d=n(34),h=n(14),b=n(15),m=n(17),p=n(16),g=n(21),v=n.n(g);var O={init:function(){},log:function(e){console.log(e)}},x=n(38);v.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(O.log(e),x.a.error("An unexpected error occurrred.")),Promise.reject(e)}));var f={get:v.a.get},S=n(35);"".concat(S.apiUrl);var C=n(12),N=n.n(C),y=function(e){var t=e.itemCount,n=e.pageSize,r=e.onPageChange,c=e.currentPage,s=Math.ceil(t/n);if(1===s)return null;var i=N.a.range(1,s+1);return Object(a.jsx)("nav",{children:Object(a.jsx)("ul",{className:"pagination",children:i.map((function(e){return Object(a.jsx)("li",{className:e==c?"page-item active":"page-item",children:Object(a.jsx)("a",{className:"page-link",onClick:function(){return r(e)},children:e})},e)}))})})};var k=[{_id:"1",name:"Action"},{_id:"2",name:"Animation"},{_id:"3",name:"Adventure"},{_id:"4",name:"Comedy"},{_id:"5",name:"Fantasy"}];var P=function(e){var t=e.items,n=e.onItemSelect,r=e.selectedItem;return Object(a.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(a.jsx)("li",{className:e==r?"list-group-item active":"list-group-item",onClick:function(){return n(e)},children:e.name},e._id)}))})},w=n(11),A=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],genres:[],pageSize:3,currentPage:1,selectedGenre:null,sortColumn:{path:"title",order:"asd"}},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleGenreSelect=function(t){e.setState({selectedGenre:t,currentPage:1})},e.handleSort=function(t){var n=Object(o.a)({},e.state.sortColumn);n.path===t?n.order="asc"==n.order?"desc":"asc":(n.path=t,n.order="asc"),e.setState({sortColumn:n})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get("https://sometimes-maybe-flaky-api.gdshive.io/");case 2:t=e.sent,n=t.data,a=[{name:"All Genres"}].concat(Object(j.a)(k.filter((function(e){return e})))),this.setState({movies:n,genres:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.movies.length,n=this.state,r=n.pageSize,s=n.currentPage,i=n.movies,o=n.selectedGenre,l=n.sortColumn,u=o&&o._id?i.filter((function(e){return e.genre===o.name})):i,j=function(e,t,n){var a=(t-1)*n;return N()(e).slice(a).take(n).value()}(N.a.orderBy(u,[l.path],[l.order]),s,r);return 0===t?Object(a.jsx)("p",{children:"There are no movies in the database"}):Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(P,{items:this.state.genres,onItemSelect:this.handleGenreSelect,selectedItem:o})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsxs)("p",{children:["Showing ",u.length," movies in the database"]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"clickable",onClick:function(){return e.handleSort("name")},children:"Name "}),Object(a.jsx)("th",{className:"clickable",onClick:function(){return e.handleSort("productionYear")},children:"Year"}),Object(a.jsx)("th",{className:"clickable",onClick:function(){return e.handleSort("genre")},children:"Genre"}),Object(a.jsx)("th",{className:"clickable",onClick:function(){return e.handleSort("synopsisShort")},children:"Synopsis"})]})}),Object(a.jsx)("tbody",{children:j.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:[" ",Object(a.jsx)(w.b,{to:"/movies/".concat(e.name),children:e.name})]}),Object(a.jsx)("td",{children:e.productionYear}),Object(a.jsx)("td",{children:e.genre}),Object(a.jsx)("td",{children:e.synopsisShort})]})}))})]}),Object(a.jsx)(y,{itemCount:u.length,pageSize:r,currentPage:s,onPageChange:this.handlePageChange})]})]})})}}]),n}(r.Component),F=function(e){return Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(a.jsx)(w.b,{className:"btn btn-outline-success",to:"/",children:"Main"}),Object(a.jsx)("button",{className:"navbar-toggler ",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})})]})},G=n(2),_=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:e.props.match.params.name},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:this.state.name})})}}]),n}(r.Component);var I=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(F,{}),Object(a.jsxs)(G.d,{children:[Object(a.jsx)(G.b,{path:"/movies/:name",render:function(e){return Object(a.jsx)(_,Object(o.a)({},e))}}),Object(a.jsx)(G.b,{path:"/movies",render:function(e){return Object(a.jsx)(A,Object(o.a)({},e))}}),Object(a.jsx)(G.a,{from:"/",to:"/movies"})]})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(w.a,{children:Object(a.jsx)(I,{})})}),document.getElementById("root")),z()}},[[71,1,2]]]);
//# sourceMappingURL=main.8fa94d4e.chunk.js.map